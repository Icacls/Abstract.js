<html lang="en">
<head>
<meta charset="UTF-8">
<title>Abstract.js</title>
<link media="all" rel="stylesheet" href="css/index.css" type="text/css" />
<link media="all" rel="stylesheet" href="css/tutorial.css" type="text/css" />
	<link type="text/css" rel="stylesheet" href="css/shCoreDefault.css"/>
</head>
<body class="doc">

<div class="page page2">
  <div class="header"><span class="logo"></span>Abstract.js
    <span class="right">Document &nbsp;<a target="_blank" href="https://github.com/AlloyTeam/Abstract.js">GitHub</a> &nbsp;<a target="_blank" href="http://www.alloyteam.com">Team Blog</a></span>
  </div>
  <div class="contentList">
    <div class="index">

    </div>
    <div class="content">
      
    </div>
  </div>

  <div class="toTop hide" id="toTop">顶部</div>

</div>

<script type="text/javascript" src="js/shCore.js"></script>
<script type="text/javascript" src="js/shBrushJScript.js"></script>
<script type="text/javascript" src="js/shBrushXml.js"></script>

<script type="text/javascript" src="js/abstract-2.0.js"></script>
<script type="text/javascript" src="js/marked.min.js"></script>
<script type="text/javascript">
SyntaxHighlighter.defaults['tab-size'] = 4;
SyntaxHighlighter.defaults['toolbar'] = false;

var tutorialList = [
  {title: "首页", link: "home"},
  {title: "快速了解", link: "glance"},
  {title: "三层架构体系", link: "thoery"},
  {title: "渲染页面", link: "renderpage"},
  {title: "模块的二进制状态化", link: "modelrelationship"},
  {title: "模块的关系模型", link: "relation"},
  {title: "通讯模式", link: "commucation"},
  {title: "模型继承", link: "extendModel"},
  {title: "Abstract事件机制", link: "event"},
  {title: "使用延时加载策略", link: "load"},
  {title: "结束模型生命", link: "stop"},
  {title: "cgiModel", link: "cgiModel"},
  {title: "linkModel", link: "linkModel"},
  {title: "模型配置与注入", link: "config"},
  {title: "扩展模型", link: "extend"},
  {title: "Soda模板概述", link: "sodaRender"},
  {title: "Abstract 2.0通用规范", link: "codeguide"},
  {title: "本页面代码示例", link: "example"},
  {title: "示例代码", link: "example2"},
  {title: "API文档", link: "API"},
];

var renderList = new RenderModel({
  data: {
    list: tutorialList
  },

  tmpl: '\
    <ul>\
    <li class="link" soda-repeat="item in list" id="{{item.link}}">{{item.title}}</li>\
    </ul>\
      <div class="wrapper copyright">\
        ©  AlloyTeam·dorsywang\
      </div>\
  ',
  el: ".index"
});

var content = new RenderModel({
  el: ".content",
  myData: {
  },
  processData: function(data){
    var md = marked(data, {sanitize: false});;

    return {
      content: md
    };

  },

  method: "GET",

  tmpl: "<div soda-bind-html='content'></div>",

  complete: function(data, cgiCount){
        SyntaxHighlighter.highlight();

        console.log(this.myData);

        window.location.hash = this.myData.selector;
  }
});

var tabs = new MultitabModel();
for(var i = 0; i < tutorialList.length; i ++){
  var item = tutorialList[i];

  var link = item.link;

  var tab;
  if(link === "home"){
     tab = new LinkModel({
         url: "index.html"
     });

  }else{
    tab = content.extend({
        url: "data/" + link + ".md",
        myData: {
          selector: link
        }
    });
  }

  tabs.add("#" + link, tab);
}

if(window.location.hash){
  tabs.init(window.location.hash);
}else{
  tabs.init("#" + tutorialList[1].link);
}

var pageModel = new PageModel();
pageModel.add(renderList);
pageModel.add(tabs);

pageModel.rock();

</script>

</body>
</html>
